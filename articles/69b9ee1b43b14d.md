---
title: "Vanilla JSã§ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚’è€ƒæ…®ã—ãŸãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ã¤ãã‚‹"
emoji: "ğŸ˜½"
type: "tech"
topics:
  - "css"
  - "html"
  - "javascript"
published: true
published_at: "2023-09-30 16:42"
---

## çµŒç·¯

ã€ŒVanilla JS ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã€ã§ Google æ¤œç´¢ã—ãŸã¨ãã€ãªã‹ãªã‹è‰¯ã„è¨˜äº‹ã«è¾¿ã‚Šç€ã‘ãªã‹ã£ãŸã®ã§å‚™å¿˜éŒ²ã¨ã—ã¦ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æ®‹ã—ã¦ãŠãã¾ã™ã€‚ï¼ˆâ€»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç­‰ã¯ä½¿ç”¨ã—ã¾ã›ã‚“ã€‚ï¼‰

æœ€çµ‚çš„ãªã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰ã€‚
<https://codesandbox.io/embed/eager-elion-6ffwzs?fontsize=14&hidenavigation=1&theme=dark&view=editor>

:::message
ä¸è¶³ã—ã¦ã„ã‚‹äº‹ãªã©ã‚ã‚Œã°æ•™ãˆã¦ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ã€‚
:::

## å®Ÿç¾ã—ãŸã„ã“ã¨

- ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãŒé–‹ãã€ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã€Œâ‰¡ã€ã¨ã€ŒÃ—ã€ãŒåˆ‡ã‚Šæ›¿ã‚ã‚‹

- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒé–‹ã„ã¦ã„ã‚‹æ™‚ã€è£å´ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã•ã›ãªã„
- esc ã‚­ãƒ¼ã§ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒé–‰ã˜ã‚‹

â€»å…±é€šäº‹é …ã¨ã—ã¦ JavaScript ã§åˆ¶å¾¡ã™ã‚‹è¦ç´ ã«ã¯`js-***`ã¨ã„ã†ã‚¯ãƒ©ã‚¹ã‚’æŒ‡å®šã™ã‚‹ã€‚

## ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆé–‹é–‰ãƒœã‚¿ãƒ³ï¼‰

ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯`<button>`ã‚¿ã‚°ã§ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã™ã‚‹ã€‚
JavaScript ã§ã®åˆ¶å¾¡ã®ãŸã‚ã«ã€class ã«ã¯`js-button`ã‚’ã¤ã‘ã‚‹ã€‚
ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã€Œâ‰¡ã€ï¼ˆ3 æœ¬æ¨ªç·šï¼‰ã¨ã€ŒÃ—ã€ï¼ˆãƒãƒ„ï¼‰ã¯ã€`<span>`ã‚¿ã‚°ã¨ç–‘ä¼¼è¦ç´ ã®`before`ã€`after`ã§æç”»ã™ã‚‹ã€‚

æŒ‡å®šã™ã‚‹å±æ€§ã¯æ¬¡ã®ã¨ãŠã‚Šã€‚

### `type`å±æ€§

`type`å±æ€§ã¯ã€`button`ã‚’æŒ‡å®šã€‚`button`ã®ä»–ã«ã€ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚µãƒ¼ãƒãƒ¼ã¸é€ä¿¡ã™ã‚‹`submit`ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’åˆæœŸå€¤ã«ã™ã‚‹`reset`å±æ€§ãŒå­˜åœ¨ã™ã‚‹ã€‚
`button`å±æ€§ã¯ã€è¦å®šã®å‹•ä½œãŒãªãã€æŠ¼ã•ã‚Œã¦ã‚‚ä½•ã‚‚è¡Œã‚ãªã„ã€‚ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã™ã‚‹ã¨èµ·å‹•ã•ã‚Œã‚‹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

### `aria-controls`å±æ€§

ã‚ã‚‹è¦ç´ ãŒåˆ¥ã®è¦ç´ ã®å†…å®¹ã‚„è¡¨ç¤ºã‚’åˆ¶å¾¡ã™ã‚‹å ´åˆã«ä½¿ç”¨ã—ã€åˆ¶å¾¡ã™ã‚‹è¦ç´ ã® id ã‚’æŒ‡å®šã€‚
`<button>`ã¯`<nav>`ã®é–‹é–‰çŠ¶æ…‹ã‚’åˆ¶å¾¡ã™ã‚‹ã®ã§ã€`<button>`ã®`aria-controls`å±æ€§ã«ã¯`<nav>`ã® id ã§ã‚ã‚‹`nav`ã‚’æŒ‡å®šã™ã‚‹ã€‚

### `aria-expanded`å±æ€§

ãã®è¦ç´ ãŒå±•é–‹å¯èƒ½ã§ã‚ã‚‹ã‹ã€ã¾ãŸã¯å±•é–‹ã•ã‚Œã¦ã„ã‚‹çŠ¶æ…‹ã‚’ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ã«ä¼ãˆã‚‹ã€‚`aria-expanded`ã®å€¤ãŒ`false`ã®å ´åˆã¯ã€ŒæŠ˜ã‚ŠãŸãŸã¿ã€ã€`true`ã®å ´åˆã¯ã€Œå±•é–‹ã€ã¨ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ãŒèª­ã¿ä¸Šã’ã€ã“ã®å±æ€§ã‚’ä½¿ç”¨ã™ã‚‹éš›ã¯ã€å±•é–‹ã®æœ‰ç„¡ã«ã‚ˆã£ã¦ JavaScript ã§å€¤ã‚’æ›¸ãæ›ãˆã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

åˆæœŸçŠ¶æ…‹ã¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒé–‰ã˜ã¦ã„ã‚‹ã®ã§`false`ã‚’æŒ‡å®šã—ã¦ãŠã„ã¦ã€JavaScript ã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®é–‹é–‰çŠ¶æ…‹ã«ã‚ã‚ã›ã¦`true`ã¨åˆ‡ã‚Šæ›¿ãˆã‚‹ã€‚

### `aria-label`å±æ€§

ç¾åœ¨ã®è¦ç´ ã«ãƒ©ãƒ™ãƒ«ä»˜ã‘ã™ã‚‹æ–‡å­—åˆ—ã‚’å®šç¾©ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ã€‚ã“ã®å±æ€§ã¯ãƒ†ã‚­ã‚¹ãƒˆãƒ©ãƒ™ãƒ«ãŒç”»é¢ã«è¡¨ç¤ºã•ã‚Œãªã„å ´åˆã«ä½¿ç”¨ã™ã‚‹ã€‚
ã“ã®å±æ€§ã§æŒ‡å®šã—ãŸãƒ©ãƒ™ãƒ«ã¯ç”»é¢ä¸Šã«ã¯è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ãŒã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ãªã©ã«å¯¾ã—ã¦ã®ã¿ãƒ©ãƒ™ãƒ«ã‚’è¨­å®šã—ã¦ãŠããŸã„å ´åˆã«åˆ©ç”¨ã§ãã‚‹ã€‚

`aria-label`å±æ€§ã«ã¯`ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã`ã‚’æŒ‡å®šã—ã¦ã‚ã’ã¦ã€ã“ã¡ã‚‰ã‚‚ JavaScript ã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®é–‹é–‰çŠ¶æ…‹ã«ã‚ã‚ã›ã¦ã€`ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹`ã¨å€¤ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã€‚

### ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

æœ€çµ‚çš„ãª`<button>`ã®ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
CSS ã«ã¤ã„ã¦ã¯è©³ã—ãè§£èª¬ã—ã¾ã›ã‚“ãŒã€`<button>`ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã«`is-active`ã‚¯ãƒ©ã‚¹ã‚’`<button>`ã«ä»˜ä¸ã—ã¦ã€ã€Œâ‰¡ã€ã¨ã€ŒÃ—ã€ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã€‚

```html:index.html
      <button
        class="button js-button"
        type="button"
        aria-controls="nav"
        aria-expanded=false
        aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã"
      >
        <span class="button-bar"></span>
      </button>
```

```css:style.css
.button {
  position: relative;
  z-index: 100;
  right: 16px;
  height: 24px;
  width: 36px;
  padding: 0;
  border: none;
  background: transparent;
  cursor: pointer;
}

.button-bar {
  display: block;
  content: "";
  width: 100%;
  height: 1px;
  background: #333333;
}

.button-bar::before,
.button-bar::after {
  display: block;
  position: absolute;
  content: "";
  width: 100%;
  height: 1px;
  background: #333333;
  transition: 0.3s ease;
}

.button-bar::before {
  top: 0;
}

.button-bar::after {
  bottom: 0;
}

.button.is-active .button-bar {
  height: 0;
}

/* ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã«ãƒãƒ„ã«å¤‰ãˆã‚‹ */
.button.is-active .button-bar::before {
  opacity: 1;
  top: 50%;
  transform: rotate(45deg) translateY(-50%);
  transition: 0.3s ease;
}

.button.is-active .button-bar::after {
  opacity: 1;
  top: 50%;
  transform: rotate(-45deg) translateY(-50%);
  transition: 0.3s ease;
}
```

## ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼

`nav`ã®ä¸­ã«`<ul>`ã¨`<li>`ã‚’ã„ã‚Œã¦ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã™ã‚‹ã€‚

### `id`

`id`ã«ã¯`<nav>`é–‹é–‰ã®ãƒˆãƒªã‚¬ãƒ¼ã¨ãªã‚‹`<button>`ã‚¿ã‚°ã«æŒ‡å®šã—ãŸã€`aria-controls`å±æ€§ã¨ã‚ã‚ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚
ä»Šå›ã¯`nav`ã‚’æŒ‡å®šã€‚

### `aria-hidden`å±æ€§

ãã®è¦ç´ ã¨å­å­«è¦ç´ ãŒã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¡¨ç¤ºã•ã‚Œãªã„ã€ã¾ãŸã¯çŸ¥è¦šã•ã‚Œãªã„ã¨ã„ã†ã“ã¨ã‚’ç¤ºã™ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã€‚ãŸã¨ãˆã°ã€ä½•ã‹ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã—ãŸã¨ãã«ã¯ã˜ã‚ã¦è¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ãªè¦ç´ ã¯ã€aria-hidden ã‚’ true ã«è¨­å®šã—ã¦ã€ãã®è¦ç´ ãŒè¡¨ç¤ºã•ã‚ŒãŸã¨ãã« aria-hidden ã‚’ false ã«ã™ã‚‹ã€‚

`<nav>`ã®åˆæœŸçŠ¶æ…‹ã¯éè¡¨ç¤ºãªã®ã§ã€`false`ã‚’æŒ‡å®šã—ã€JavaScript ã§`true`ã¨åˆ‡ã‚Šæ›¿ãˆã¾ã™ã€‚

### ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰

æœ€çµ‚çš„ãª`<nav>`ã®ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã¯æ¬¡ã®ã¨ãŠã‚Šã€‚

```html:index.html
      <nav id="nav" class="menu js-menu" aria-hidden="true">
        <div class="overlay js-overlay"></div>
        <ul class="list js-list">
          <li class="item"><a href="/">menu</a></li>
          <li class="item"><a href="/">menu</a></li>
          <li class="item"><a href="/">menu</a></li>
          <li class="item"><a href="/">menu</a></li>
        </ul>
      </nav>
```

```css:style.css
.menu {
  opacity: 0;
  visibility: hidden;
  position: fixed;
  inset: 0;
  transition: 0.3s ease;
}

.menu.is-active {
  opacity: 1;
  visibility: visible;
  width: 100%;
  height: 100vh;
  transition: 0.5s ease;
}

.overlay {
  position: fixed;
  inset: 0;
  z-index: 1;
  width: 100vw;
  height: 100vh;
  background: rgba(124, 124, 124, 0.233);
}

.list {
  display: flex;
  z-index: 100;
  align-items: center;
  justify-content: center;
  height: 100vh;
  height: 100dvh;
  gap: 24px;
  font-size: 20px;
  flex-direction: column;
  list-style-type: none;
}
```

## JavaScript

JavaScript ã¯æ¬¡ã®ã¨ãŠã‚Šã€‚
ç°¡å˜ã«èª¬æ˜ã™ã‚‹ã¨ã€å„è¦ç´ ã‚’å–å¾—ã—ã¦`<button>`ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã«ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®é–‹é–‰ã¨å„å±æ€§ã®å€¤ã‚’åˆ‡ã‚Šæ›¿ãˆã¦ã„ã‚‹ã€‚
ã¾ãŸã€`<body>`ã«`overflow: hidden`ã‚’ä»˜ä¸ã—ã¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒé–‹ã„ã¦ã„ã‚‹ã¨ãã¯ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãŒã§ããªã„ã‚ˆã†ã«ã—ã€`esc`ã‚­ãƒ¼ã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒé–‰ã˜ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚

```js:index.js
const button = document.querySelector(".js-button");
const menu = document.querySelector(".js-menu");
const overlay = document.querySelector(".js-overlay");
const list = document.querySelector(".js-list");

const toggleMenu = () => {
  button.classList.toggle("is-active");
  menu.classList.toggle("is-active");
  overlay.classList.toggle("is-active");
  list.classList.toggle("is-active");

  // <button>ã‚¿ã‚°ã®aria-expandedå±æ€§ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
  const isExpanded = button.getAttribute("aria-expanded") === "true"; //ã€€aria-expandedã®çŠ¶æ…‹ï¼ˆtrue or falseï¼‰ã‚’å–å¾—ã™ã‚‹, "true"ãªã‚‰trueã«ã€ãã‚Œä»¥å¤–ãªã‚‰isExpandedã¯falseã«ãªã‚‹ï¼ˆå³å¯†ç­‰ä¾¡æ¼”ç®—å­ï¼‰
  button.setAttribute("aria-expanded", isExpanded ? false : "true"); //ã€€isExpandedãŒtrueãªã‚‰æœ€åˆã®å€¤(false)ã«ã€falseãªã‚‰æ¬¡ã®å€¤(true)ã«ãªã‚‹ï¼ˆä¸‰é …æ¼”ç®—å­ï¼‰

  // <button>ã‚¿ã‚°ã®aria-labelå±æ€§ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
  const isMenu = button.getAttribute("aria-label") === "ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã"; //ã€€aria-labelã®çŠ¶æ…‹ï¼ˆtrue or falseï¼‰ã‚’å–å¾—ã™ã‚‹, "ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã"ãªã‚‰trueã«ã€ãã‚Œä»¥å¤–ãªã‚‰aria-labelã¯falseã«ãªã‚‹ï¼ˆå³å¯†ç­‰ä¾¡æ¼”ç®—å­ï¼‰
  button.setAttribute(
    "aria-label",
    isMenu ? "ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹" : "ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã"
  ); //ã€€isMenuãŒtrueãªã‚‰æœ€åˆã®å€¤(ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‰ã˜ã‚‹)ã«ã€falseãªã‚‰æ¬¡ã®å€¤(ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã)ã«ãªã‚‹ï¼ˆä¸‰é …æ¼”ç®—å­ï¼‰

  // <nav>ã‚¿ã‚°ã®aria-hiddenå±æ€§ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
  const isHidden = menu.getAttribute("aria-hidden") === "true"; //ã€€aria-hiddenã®çŠ¶æ…‹ï¼ˆtrue or falseï¼‰ã‚’å–å¾—ã™ã‚‹, "true"ãªã‚‰trueã«ã€ãã‚Œä»¥å¤–ãªã‚‰aria-hiddenã¯falseã«ãªã‚‹ï¼ˆå³å¯†ç­‰ä¾¡æ¼”ç®—å­ï¼‰
  menu.setAttribute("aria-hidden", isHidden ? false : "true"); //ã€€isHiddenãŒtrueãªã‚‰æœ€åˆã®å€¤(false)ã«ã€falseãªã‚‰æ¬¡ã®å€¤(true)ã«ãªã‚‹ï¼ˆä¸‰é …æ¼”ç®—å­ï¼‰

  // bodyã®overflowã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
  document.body.style.overflow =
    document.body.style.overflow === "hidden" ? "" : "hidden"; // bodyã‚¿ã‚°ã®overflowãŒhiddenãªã‚‰ä½•ã‚‚ã—ãªã„ã€ãã‚Œä»¥å¤–ãªã‚‰overflowã«"hidden"ã‚’ä»˜ä¸ã™ã‚‹
};

button.addEventListener("click", toggleMenu);

// ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚­ãƒ¼ã§ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒé–‰ã˜ã‚‹ã‚ˆã†ã«ã™ã‚‹
document.addEventListener("keydown", function (e) {
  if (e.key === "Escape") {
    toggleMenu();
  }
});
```

## ãƒ‡ãƒ¢ã‚µã‚¤ãƒˆ

@[codesandbox](https://codesandbox.io/embed/eager-elion-6ffwzs?fontsize=14&hidenavigation=1&theme=dark)
