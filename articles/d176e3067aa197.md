---
title: "Ajaxé€šä¿¡ã‚’ä½¿ç”¨ã—ãŸé™çš„ã‚µã‚¤ãƒˆã§ãŠçŸ¥ã‚‰ã›è¨˜äº‹ã¨ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã™ã‚‹"
emoji: "ğŸ”–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [HTML, CSS, JavaScript]
published: false
---

HTMLã€CSSã€JavaScript ã®ã¿ã®é™çš„ã‚µã‚¤ãƒˆåˆ¶ä½œæ¡ˆä»¶ã§ã€JSON ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å–å¾—ã—ãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ ã®ä¸€è¦§è¡¨ç¤ºã¨ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã—ãŸæ™‚ã®å‚™å¿˜éŒ²

## HTML ã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ç”¨ã® JSON ãƒ•ã‚¡ã‚¤ãƒ«

- JSON ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ã‚‚ã¨ã«è¦ç´ ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã® HTML

```html:index.html
<div class="newsList" id="newsList"></div>
<div class="pagination" id="pagination"></div>
```

- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ç®¡ç†ç”¨ã® JSON ãƒ•ã‚¡ã‚¤ãƒ«

```js:data/news.json
[
    {
        "date": "2025-00-00",
        "category": "ãƒ‹ãƒ¥ãƒ¼ã‚¹ã®ã‚«ãƒ†ã‚´ãƒª",
        "title": "ãƒ‹ãƒ¥ãƒ¼ã‚¹ã®ã‚¿ã‚¤ãƒˆãƒ«",
        "link": "#"
    },
    {
        "date": "2025-00-00",
        "category": "ãƒ‹ãƒ¥ãƒ¼ã‚¹ã®ã‚«ãƒ†ã‚´ãƒª",
        "title": "ãƒ‹ãƒ¥ãƒ¼ã‚¹ã®ã‚¿ã‚¤ãƒˆãƒ«",
        "link": "#"
    },
]
```

## ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ä¸€è¦§ã‚’è¡¨ç¤ºã•ã›ã‚‹

ä¸€è¦§ã‚’è¡¨ç¤ºã•ã›ã‚‹ãŸã‚ã® JavaScript
:::details main.js

```js
document.addEventListener("DOMContentLoaded", function () {
  const newsList = document.getElementById("newsList");
  const pagination = document.getElementById("pagination");
  const ITEMS_PER_PAGE = 5;
  const url = "data/news.json";

  async function fetchData(url) {
    try {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(
          `Network response was not ok: ${response.status} ${response.statusText}`
        );
      }
      return await response.json();
    } catch (error) {
      console.error("Error fetching data:", error);
      displayError("ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚");
      return null;
    }
  }

  function displayError(message) {
    newsList.innerHTML = `<p class="error">${message}</p>`;
  }

  function renderNewsList(newsData, page) {
    newsList.innerHTML = "";

    const startIndex = (page - 1) * ITEMS_PER_PAGE;
    const endIndex = startIndex + ITEMS_PER_PAGE;
    const paginatedData = newsData.slice(startIndex, endIndex);

    paginatedData.forEach((item) => {
      const newsItem = document.createElement("a");
      newsItem.href = item.link;
      newsItem.className = "item";
      if (item.external) {
        newsItem.target = "_blank";
        newsItem.classList.add("external");
      }

      newsItem.innerHTML = `
              <p class="meta">
                <time class="date" datetime="${item.date}">${item.date.replace(
        /-/g,
        "."
      )}</time>
                <span class="category">${item.category}</span>
              </p>
              <h3 class="title">
                ${item.title}
                ${
                  item.external
                    ? `
                  <span role="img" aria-hidden="true">
                    <svg
                      role="img"
                      aria-hidden="true"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                    >
                      <path
                        d="M5 21C4.45 21 3.97917 20.8042 3.5875 20.4125C3.19583 20.0208 3 19.55 3 19V5C3 4.45 3.19583 3.97917 3.5875 3.5875C3.97917 3.19583 4.45 3 5 3H12V5H5V19H19V12H21V19C21 19.55 20.8042 20.0208 20.4125 20.4125C20.0208 20.8042 19.55 21 19 21H5ZM9.7 15.7L8.3 14.3L17.6 5H14V3H21V10H19V6.4L9.7 15.7Z"
                        fill="#E14D21"
                      />
                    </svg>
                  </span>`
                    : ""
                }
              </h3>
          `;

      newsList.appendChild(newsItem);
    });
  }

  function renderPagination(newsData, currentPage, onPageChange) {
    pagination.innerHTML = "";
    const totalPages = Math.ceil(newsData.length / ITEMS_PER_PAGE);

    const createButton = (label, disabled, onClick) => {
      const button = document.createElement("button");
      button.textContent = label;
      button.disabled = disabled;
      button.addEventListener("click", onClick);
      return button;
    };

    // Previous button
    pagination.appendChild(
      createButton("å‰ã¸", currentPage === 1, () => onPageChange(currentPage - 1))
    );

    // Page buttons
    for (let i = 1; i <= totalPages; i++) {
      if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {
        const button = createButton(i, i === currentPage, () => onPageChange(i));
        if (i === currentPage) button.classList.add("active");
        pagination.appendChild(button);
      } else if (
        (i === currentPage - 2 || i === currentPage + 2) &&
        pagination.lastChild.textContent !== "..."
      ) {
        const dots = document.createElement("span");
        dots.textContent = "...";
        pagination.appendChild(dots);
      }
    }

    // Next button
    pagination.appendChild(
      createButton("æ¬¡ã¸", currentPage === totalPages, () => onPageChange(currentPage + 1))
    );
  }

  async function initialize() {
    const data = await fetchData(url);
    if (!data) return;

    let currentPage = 1;

    const onPageChange = (page) => {
      currentPage = page;
      renderNewsList(data, currentPage);
      renderPagination(data, currentPage, onPageChange);
    };

    renderNewsList(data, currentPage);
    renderPagination(data, currentPage, onPageChange);
  }

  initialize();
});
```

:::

- `inner.HTML`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ç”Ÿæˆã—ãŸ HTML ã‚’è¡¨ç¤ºã•ã›ã‚‹è¦ç´ ã‚’å–å¾—ï¼ˆ`document.getElementById`ï¼‰
- 1 ãƒšãƒ¼ã‚¸ã«è¡¨ç¤ºã•ã›ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä¸Šé™ï¼ˆ`ITEMS_PER_PAGE`ï¼‰
- JSON ãƒ‡ãƒ¼ã‚¿ã®ãƒ‘ã‚¹ï¼ˆ`data/news.json`ï¼‰

```js
const newsList = document.getElementById("newsList");
const pagination = document.getElementById("pagination");
const ITEMS_PER_PAGE = 5;
const url = "data/news.json";
```

- fetch é–¢æ•°ã‚’ä½¿ç”¨ã—ã¦ã€news.json ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰éåŒæœŸã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚ã“ã®é–¢æ•°ã¯ Promise ã‚’è¿”ã—ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæˆåŠŸã™ã‚‹ã¨ Response ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒè¿”ã•ã‚Œã¾ã™ã€‚
- å–å¾—ã—ãŸ Response ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ response.json()ãƒ¡ã‚½ãƒƒãƒ‰ã§ JSON å½¢å¼ã«å¤‰æ›ã—ã¾ã™ã€‚ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚‚éåŒæœŸå‡¦ç†ã§ã‚ã‚Šã€Promise ã‚’è¿”ã—ã¾ã™ã€‚
- å¤‰æ›ã•ã‚ŒãŸ JSON ãƒ‡ãƒ¼ã‚¿ã‚’ data ã¨ã„ã†å¤‰æ•°ã«æ ¼ç´ã—ã€renderNewsList é–¢æ•°ã¨ renderPagination é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¦ã€ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒªã‚¹ãƒˆã¨ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’æç”»ã—ã¾ã™ã€‚

```js
async function fetchData(url) {
  try {
    const response = await fetch(url);
    if (!response.ok) {
      throw new Error(
        `Network response was not ok: ${response.status} ${response.statusText}`
      );
    }
    return await response.json();
  } catch (error) {
    console.error("Error fetching data:", error);
    displayError("ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚");
    return null;
  }
}
```
